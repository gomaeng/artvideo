<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Type Switch + Slider (No Auto Scroll on Init)</title>
<!--아래 main-color 에 원하는 색상 hex 값을 넣습니다. 자동으로 모두 조절됩니다-->
<style>
:root {
  --main-color: #FDA5BB;
  --thumb-bg: #f4f4f4;
  --small-border-color: #737373;
}

html, body {
  margin: 0; padding: 0;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", sans-serif;
  background: #fff; color: #222;
}

body > div[data-root-container] {
  max-width: 1180px;
  margin: 36px auto;
  padding: 0 20px;
  box-sizing: border-box;
}

[data-type-buttons] {
  display: flex;
  justify-content: center;
  gap: 14px;
  margin-bottom: 30px;
}
[data-type-buttons] button {
  padding: 10px 24px;
  border-radius: 8px;
  border: 0;
  cursor: pointer;
  font-size: 16px;
  font-weight: 600;
  background: #eee;
  color: #666;
  transition: all .25s;
}
[data-type-buttons] button[data-active="true"] {
  background: var(--main-color);
  color: #fff;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.18);
}

section[data-type] { display: none; }
section[data-type][data-active="true"] { display: block; animation: fadeIn 0.4s ease; }

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}

div[data-root] {
  background: #fff;
  border-radius: 16px;
  padding: 20px;
  box-shadow: 0 8px 10px rgba(0, 0, 0, 0.18);
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  gap: 20px;
}

div[data-upper] {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  align-items: stretch;
}

div[data-stage] {
  flex: 3;
  min-width: 300px;
  position: relative;
  border-radius: 16px;
  background: #000;
  overflow: hidden;
  aspect-ratio: 16 / 9;
  box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

[data-stage] > div[data-slide] {
  position: absolute; inset: 0;
  display: flex; align-items: center; justify-content: center;
  transition: transform 420ms cubic-bezier(.2,.9,.3,1), opacity 300ms;
  transform: translateX(10%); opacity: 0; pointer-events: none;
  background: #000;
}
[data-stage] > div[data-slide][data-active="true"] {
  transform: translateX(0); opacity: 1; pointer-events: auto;
  z-index: 1;
}

[data-slide] iframe {
  width: 100%; height: 100%;
  border: 0;
}

[data-stage] > button[data-action] {
  position: absolute; top: 50%; transform: translateY(-50%);
  width: 44px; height: 44px; border-radius: 50%;
  border: 0; background: rgba(255,255,255,0.85);
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  cursor: pointer; z-index: 10;
  display: flex; align-items: center; justify-content: center;
  font-size: 18px; transition: background 0.2s;
}
[data-stage] > button[data-action]:hover { background: #fff; }
[data-stage] > button[data-action="prev"] { left: 14px; }
[data-stage] > button[data-action="next"] { right: 14px; }

div[data-controls] {
  flex: 1;
  min-width: 200px;
  display: flex;
  flex-direction: column; 
  max-height: 100%; 
  position: relative;
}

div[data-thumbs-wrapper] {
  flex: 1;
  position: relative;
  overflow: hidden;
  border-radius: 8px;
  background: var(--thumb-bg);
}

div[data-thumbs] {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 10px;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--main-color);
}

[data-thumbs] > button[data-thumb] {
  width: 100%; 
  aspect-ratio: 16 / 9;
  flex-shrink: 0;
  border-radius: 6px;
  border: 3px solid transparent;
  padding: 0; margin: 0;
  background: #fff;
  cursor: pointer;
  overflow: hidden;
  position: relative;
  transition: border-color 0.2s;
  box-shadow: 0 4px 5px rgba(0,0,0,0.2);
}
[data-thumb] > img {
  width: 100%; height: 100%; object-fit: cover; display: block;
}
[data-thumbs] > button[data-thumb][data-active="true"] {
  border-color: var(--small-border-color);
}
[data-thumbs] > button[data-thumb]:not([data-active="true"]) {
  opacity: 0.7;
}
[data-thumbs] > button[data-thumb]:hover {
  opacity: 1;
}
[data-thumbs]::-webkit-scrollbar { width: 6px; }
[data-thumbs]::-webkit-scrollbar-track { background: transparent; }
[data-thumbs]::-webkit-scrollbar-thumb { background: #ccc; border-radius: 4px; }
[data-thumbs]::-webkit-scrollbar-thumb:hover { background: var(--main-color); }

div[data-info-area] {
  padding: 10px 10px 0 10px;
  border-top: 1px solid #eee;
  padding-top: 20px;
  text-align: left;
}

h2[data-video-title] {
  margin: 0 0 10px 0;
  font-size: 24px;
  font-weight: 700;
  color: #111;
  line-height: 1.3;
}

p[data-video-desc] {
  margin: 0;
  font-size: 16px;
  color: #555;
  line-height: 1.6;
  white-space: pre-wrap;
}

@media (max-width: 600px) {
  div[data-upper] {
    flex-direction: column;
  }
  
  div[data-stage] {
    width: 100%;
    flex: none;
  }
  
  div[data-controls] {
    width: 100%;
    flex: none;
    height: auto;
    max-height: none;
  }
  
  div[data-thumbs-wrapper] {
    height: auto;
    overflow: visible;
    background: transparent;
  }
  div[data-thumbs] {
    position: static;
    flex-direction: row;
    overflow-x: auto;
    overflow-y: hidden;
    padding-bottom: 10px;
  }
  [data-thumbs] > button[data-thumb] {
    width: 160px;
    aspect-ratio: 16/9;
  }
  
  h2[data-video-title] { font-size: 20px; }
  p[data-video-desc] { font-size: 14px; }
}

</style>
</head>
<body>

<div data-root-container>
    <div data-type-buttons></div>
    <div id="type-container"></div>
</div>

<script>
// ------------------- 데이터 정의 -------------------
// 아래를 수정합니다. id 에는 유튜브 아이디를 넣습니다. https://www.youtube.com/watch?v=ltErTIHvcWk 유튜브 링크라면 id는 ltErTIHvcWk
// title은 단락락 제목 videotitle에는 제목, desc는 설명
const videoData = {
    A: {
        title: "버츄얼",
        items: [
            { id: "ltErTIHvcWk", videoTitle: "강렬한 인트로 예시", desc: "이 영상은 강렬한 색감과 빠른 전환 효과를 사용한 인트로입니다.\n시청자의 이목을 집중시키기에 좋습니다." },
            { id: "OWoyKGNxb4A", videoTitle: "부드러운 전환 효과", desc: "잔잔한 분위기의 영상에 어울리는 부드러운 트렌지션입니다." },
            { id: "Lx7TVqg6n38", videoTitle: "타이포그래피 오프닝", desc: "텍스트 움직임 위주로 구성된 깔끔한 오프닝 영상입니다." },
            { id: "Z1VeR8nJdXA", videoTitle: "네온 스타일 인트로", desc: "사이버펑크 느낌의 네온 효과를 적용했습니다." },
            { id: "1LaOmUu8bjk", videoTitle: "심플 로고 등장", desc: "로고가 간단하게 등장하고 사라지는 미니멀한 구성입니다." },
            { id: "8ILIHR-kVh4", videoTitle: "글리치 효과", desc: "디지털 노이즈(글리치) 효과를 사용한 트렌디한 스타일입니다." },
            { id: "raZWtd5ksM0", videoTitle: "레트로 스타일", desc: "90년대 비디오 테이프 느낌을 재현했습니다." },
            { id: "VxZDmLRAr3U", videoTitle: "3D 모션 그래픽", desc: "3D 공간감을 활용한 고급스러운 인트로입니다." }
        ]
    },
    B: {
        title: "월페이퍼",
        items: [
            { id: "S04OrYbTbFKCTeBS", videoTitle: "리안님", desc: "리안님 대기화면 월페이퍼 작업했습니다." },
            { id: "qQWDt4uEq7FH2V8p", videoTitle: "온울님", desc: "온울님 여름 월페이퍼 작업했습니다." },
            { id: "fVXes8v63aZFHUnf", videoTitle: "몬드님", desc: "협업 샘플 작업입니다./n몬드님 방송 대기화면" },
            { id: "Z1VeR8nJdXA", videoTitle: "네온 스타일 인트로", desc: "사이버펑크 느낌의 네온 효과를 적용했습니다." },
            { id: "1LaOmUu8bjk", videoTitle: "심플 로고 등장", desc: "로고가 간단하게 등장하고 사라지는 미니멀한 구성입니다." },
            { id: "8ILIHR-kVh4", videoTitle: "글리치 효과", desc: "디지털 노이즈(글리치) 효과를 사용한 트렌디한 스타일입니다." },
            { id: "raZWtd5ksM0", videoTitle: "레트로 스타일", desc: "90년대 비디오 테이프 느낌을 재현했습니다." },
            { id: "VxZDmLRAr3U", videoTitle: "3D 모션 그래픽", desc: "3D 공간감을 활용한 고급스러운 인트로입니다." }
        ]
    },
};

function buildAllTypes() {
    const typeButtons = document.querySelector("[data-type-buttons]");
    const container = document.getElementById("type-container");

    typeButtons.innerHTML = "";
    container.innerHTML = "";

    Object.keys(videoData).forEach((typeKey, idx) => {
        const categoryData = videoData[typeKey];

        const btn = document.createElement("button");
        btn.textContent = categoryData.title;
        btn.setAttribute("data-switch", typeKey);
        if (idx === 0) btn.setAttribute("data-active", "true");
        typeButtons.appendChild(btn);

        const sec = document.createElement("section");
        sec.setAttribute("data-type", typeKey);
        if (idx === 0) sec.setAttribute("data-active", "true");

        sec.innerHTML = generateSliderHTML(categoryData.items);
        container.appendChild(sec);
    });
}

function generateSliderHTML(items) {
    let slides = "";
    items.forEach((item, i) => {
        const safeTitle = item.videoTitle.replace(/'/g, "&apos;");
        const safeDesc = item.desc.replace(/'/g, "&apos;");
        
        slides += `
        <div data-slide 
             data-id="${item.id}" 
             data-index="${i}" 
             data-active="${i===0}"
             data-title="${safeTitle}"
             data-desc="${safeDesc}">
            <iframe src="https://www.youtube.com/embed/${item.id}" allowfullscreen></iframe>
        </div>`;
    });

    let thumbs = "";
    items.forEach((item, i) => {
        thumbs += `
        <button data-thumb data-index="${i}" ${i===0 ? 'data-active="true"' : ''}>
            <img src="https://img.youtube.com/vi/${item.id}/hqdefault.jpg">
        </button>`;
    });

    const firstItem = items[0];

    return `
    <div data-root>
        <div data-upper>
            <div data-stage aria-roledescription="carousel" data-autoplay="false" data-interval="6000">
                ${slides}
                <button data-action="prev">❮</button>
                <button data-action="next">❯</button>
            </div>

            <div data-controls>
                 <div data-thumbs-wrapper>
                    <div data-thumbs>${thumbs}</div>
                 </div>
            </div>
        </div>
        
        <div data-info-area>
            <h2 data-video-title>${firstItem.videoTitle}</h2>
            <p data-video-desc>${firstItem.desc}</p>
        </div>
    </div>
    `;
}

buildAllTypes();

const typeButtons = document.querySelectorAll('[data-type-buttons] button');
const typeSections = document.querySelectorAll('section[data-type]');

typeButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    const target = btn.getAttribute('data-switch');

    typeButtons.forEach(b => b.removeAttribute('data-active'));
    btn.setAttribute('data-active','true');

    typeSections.forEach(sec => {
      if(sec.getAttribute('data-type') === target) {
        sec.setAttribute('data-active','true');
        window.dispatchEvent(new Event('resize')); 
      } else {
        sec.removeAttribute('data-active');
      }
    });
  });
});

(function(){
  const roots = document.querySelectorAll('div[data-root]');

  roots.forEach(root => {
    const stage = root.querySelector('div[data-stage]');
    const slides = Array.from(stage.querySelectorAll('div[data-slide]'));
    const prevBtn = stage.querySelector('button[data-action="prev"]');
    const nextBtn = stage.querySelector('button[data-action="next"]');
    
    const thumbsWrap = root.querySelector('div[data-thumbs]'); 
    const thumbButtons = Array.from(thumbsWrap.querySelectorAll('button[data-thumb]'));

    const titleEl = root.querySelector('h2[data-video-title]');
    const descEl = root.querySelector('p[data-video-desc]');

    let current = slides.find(s => s.getAttribute('data-active') === 'true')
                  ?.getAttribute('data-index') || 0;
    current = Number(current);
    const total = slides.length;

    let autoplay = stage.getAttribute('data-autoplay') === 'true';
    let interval = parseInt(stage.getAttribute('data-interval') || '5000', 10);
    let timer = null;

    function updateUI(shouldScroll = true){
      slides.forEach(s => {
        const idx = Number(s.getAttribute('data-index'));
        const active = idx === current;
        s.setAttribute('data-active', active ? 'true' : 'false');
        
        if(active) {
            titleEl.textContent = s.getAttribute('data-title');
            descEl.textContent = s.getAttribute('data-desc');
        }
      });

      thumbButtons.forEach((t,i)=>{
        if(i === current) t.setAttribute('data-active','true');
        else t.removeAttribute('data-active');
      });
      if(shouldScroll) {
          const activeThumb = thumbButtons[current];
          if(activeThumb){
             activeThumb.scrollIntoView({ behavior:'smooth', block: 'nearest', inline: 'center' });
          }
      }
    }

    function goTo(i){
      if(i < 0) i = total - 1;
      if(i >= total) i = 0;
      current = i;
      updateUI(true);
      resetAutoplay();
    }

    function prev(){ goTo(current-1); }
    function next(){ goTo(current+1); }

    thumbButtons.forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const idx = Number(btn.getAttribute('data-index'));
        goTo(idx);
      });
    });

    prevBtn.addEventListener('click', prev);
    nextBtn.addEventListener('click', next);

    function startAutoplay(){
      if(!autoplay) return;
      stopAutoplay();
      timer = setInterval(()=>next(), interval);
    }
    function stopAutoplay(){
      if(timer){ clearInterval(timer); timer=null; }
    }
    function resetAutoplay(){
      stopAutoplay();
      startAutoplay();
    }

    updateUI(false);
    startAutoplay();
  });
})();

(function() {
  function sendHeight() {
    const height = document.body.scrollHeight;
    parent.postMessage({ type: "sliderHeight", value: height }, "*");
  }
  window.addEventListener('load', sendHeight);
  window.addEventListener('resize', sendHeight);
  setInterval(sendHeight, 1000);
})();
</script>

</body>
</html>
